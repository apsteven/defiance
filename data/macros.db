{"_id":"BRUAQCGtt93GdAll","name":"token vision","type":"script","author":"7C4n5U6t3s1t1j3A","img":"icons/svg/dice-target.svg","scope":"global","command":"game.actors.updateAll(a => ({\n    \"token.vision\" : false\n}), a => a.data.type !== 'character');","folder":null,"sort":0,"permission":{"default":0,"7C4n5U6t3s1t1j3A":3},"flags":{"combat-utility-belt":{"macroTrigger":""}}}
{"_id":"GXPr49YV4bg2PSzH","name":"Stop Rotation","type":"script","author":"7C4n5U6t3s1t1j3A","img":"icons/svg/dice-target.svg","scope":"global","command":"await token.document.update({lockRotation: true});","folder":null,"sort":0,"permission":{"default":0,"7C4n5U6t3s1t1j3A":3},"flags":{"combat-utility-belt":{"macroTrigger":""}}}
{"_id":"STbnRFZqkyCdYVAH","name":"Fix Feature Images","type":"script","author":"7C4n5U6t3s1t1j3A","img":"icons/svg/dice-target.svg","scope":"global","command":"const oldImg = \"icons/svg/item-bag.svg\";\nfor(let actor of game.actors){\n  const filter = actor.items.filter(i => i.data.img === oldImg);\n  const updates = filter.map(i => ({_id: i.id, img: actor.data.img}));\n  await actor.updateEmbeddedDocuments(\"Item\", updates);\n}","folder":null,"sort":0,"permission":{"default":0,"7C4n5U6t3s1t1j3A":3},"flags":{"combat-utility-belt":{"macroTrigger":""}}}
{"_id":"a2CsGYqinvsWPQCf","name":"Spinner","type":"script","author":"7C4n5U6t3s1t1j3A","img":"icons/svg/dice-target.svg","scope":"global","command":"function getControlledPlaceables() {\n    var controlled = [];\n    switch (canvas.activeLayer.name) {\n        case TokenLayer.name:\n            controlled = canvas.tokens.controlled;\n            break;\n        case TilesLayer.name:\n            controlled = canvas.tiles.controlled;\n            break;\n        case DrawingsLayer.name:\n            controlled = canvas.drawings.controlled;\n            break;\n     }\n     return controlled;\n }\n var controlled = getControlledPlaceables();\n function updateAngle(angle) {\n    if(controlled) {\n       const tokens = controlled.map(token => {\n        return {\n          _id: token.id,\n          \"rotation\": angle,\n         };\n    });\n\n    canvas.scene.updateEmbeddedDocuments('Token', tokens);\n    }\n}\n\nlet the_angle = 0;\nlet speed = 3;\n\nasync function update_spinner() {\n  \n     the_angle += speed;\n     the_angle = the_angle % 360; // it's a circle\n    \n     updateAngle(the_angle);\n      \n     setTimeout(update_spinner, 120);\n      \n}\n\nupdate_spinner();","folder":null,"sort":0,"permission":{"default":0,"7C4n5U6t3s1t1j3A":3},"flags":{"combat-utility-belt":{"macroTrigger":""}}}
{"_id":"epydHLcLPsy3Dnlc","name":"Match Names scenes","type":"script","author":"7C4n5U6t3s1t1j3A","img":"icons/svg/dice-target.svg","scope":"global","command":"for (let sce of game.scenes){\nlet updates=sce.tokens.map(i=>({\n_id:i.id,\nname:i.actor.name\n}))\nawait sce.updateEmbeddedDocuments(\"Token\", updates)\n\n}","folder":null,"sort":0,"permission":{"default":0,"7C4n5U6t3s1t1j3A":3},"flags":{"combat-utility-belt":{"macroTrigger":""}}}
{"_id":"k8WjWTY5jv5AFxp2","name":"Sidebar Token Defaults","type":"script","author":"7C4n5U6t3s1t1j3A","img":"icons/svg/dice-target.svg","scope":"global","command":"const updates = game.actors.map(a => ({_id: a.id, \"token.displayName\": CONST.TOKEN_DISPLAY_MODES.OWNER_HOVER,\n\"token.displayBars\": CONST.TOKEN_DISPLAY_MODES.OWNER_HOVER,\n\"token.bar1.attribute\": \"attributes.hp\",\n\"token.bar2.attribute\": \"attributes.ac.value\"}));\nActor.updateDocuments(updates);","folder":null,"sort":0,"permission":{"default":0,"7C4n5U6t3s1t1j3A":3},"flags":{"combat-utility-belt":{"macroTrigger":""}}}
{"name":"Missile Launchers (explosion)","type":"script","author":"7C4n5U6t3s1t1j3A","img":"worlds/dawnofdefiance/characters/vehicles_and_starships/AT-ST_token.webp","scope":"global","command":"game.sw5e.rollItemMacro(\"Missile Launchers (explosion)\");","folder":null,"sort":0,"permission":{"default":0,"7C4n5U6t3s1t1j3A":3},"flags":{"sw5e":{"itemMacro":true}},"_id":"n7tlQdefv8Iw1kvu"}
{"_id":"oYzWBVPbJ0uiizOR","name":"Default Token Display","type":"script","author":"7C4n5U6t3s1t1j3A","img":"icons/svg/dice-target.svg","scope":"global","command":"// Update all tokens on the map so that the name shows on hover and the bars always show.\n// Display Modes: ALWAYS, CONTROL, HOVER, NONE, OWNER, OWNER_HOVER\n\nconst tokens = canvas.tokens.placeables.map(token => {\n  return {\n    _id: token.id,\n    \"bar1.attribute\": \"attributes.hp\",\n    \"bar2.attribute\": \"attributes.ac.value\",\n    \"displayName\": CONST.TOKEN_DISPLAY_MODES.OWNER_HOVER,\n    \"displayBars\": CONST.TOKEN_DISPLAY_MODES.OWNER_HOVER\n  };\n});\n\ncanvas.scene.updateEmbeddedDocuments('Token', tokens)","folder":null,"sort":0,"permission":{"default":0,"7C4n5U6t3s1t1j3A":3},"flags":{"combat-utility-belt":{"macroTrigger":""}}}
{"_id":"x6HEyAO9RVLfaetM","name":"Match Names Sidebar","type":"script","author":"7C4n5U6t3s1t1j3A","img":"icons/svg/dice-target.svg","scope":"global","command":"let updates=[]\nfor (let act of game.actors){\nupdates.push({\n_id:act.id,\n\"token.name\":act.name\n})\n}\nActor.updateDocuments(updates)","folder":null,"sort":0,"permission":{"default":0,"7C4n5U6t3s1t1j3A":3},"flags":{"combat-utility-belt":{"macroTrigger":""}}}
